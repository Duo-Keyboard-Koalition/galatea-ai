(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[780],{869:function(e,t,s){Promise.resolve().then(s.bind(s,2731))},2731:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return C}});var r=s(7437),l=s(2265),a=s(2869),i=s(6070),n=s(3145),o=s(9376),c=s(8990),d=s(9205);let h=(0,d.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),x=(0,d.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),m=(0,d.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),f=(0,d.Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);var u=s(6910),j=s(3481);let p=()=>{let[e,t]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=()=>{t(window.innerHeight>window.innerWidth)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e},b=e=>{let{image:t,name:s,currentIndex:l,totalImages:a,onNavigate:i,isMobile:o=!1}=e;return(0,r.jsx)("div",{className:"".concat(o?"w-full h-full":"md:w-1/2 h-[40vh] md:h-full"," relative"),children:(0,r.jsxs)("div",{className:"relative h-full w-full",children:[(0,r.jsx)(n.default,{src:t,alt:"".concat(s," photo ").concat(l+1),fill:!0,style:{objectFit:"cover"},className:"transition-opacity duration-300",priority:!0}),(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center",children:(0,r.jsx)("button",{onClick:()=>i("prev"),className:"bg-black bg-opacity-30 hover:bg-opacity-50 text-white p-2 rounded-r-lg transition-all","aria-label":"Previous photo",children:(0,r.jsx)(h,{size:24})})}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center",children:(0,r.jsx)("button",{onClick:()=>i("next"),className:"bg-black bg-opacity-30 hover:bg-opacity-50 text-white p-2 rounded-l-lg transition-all","aria-label":"Next photo",children:(0,r.jsx)(x,{size:24})})}),(0,r.jsx)("div",{className:"absolute ".concat(o?"bottom-16":"bottom-4"," left-0 right-0 flex justify-center"),children:(0,r.jsxs)("div",{className:"bg-black bg-opacity-50 text-white px-3 py-1 rounded-full text-sm",children:[l+1," / ",a]})}),o&&(0,r.jsxs)("div",{className:"absolute bottom-20 left-0 right-0 flex justify-center space-x-16 z-10",children:[(0,r.jsx)("button",{className:"bg-white bg-opacity-90 text-gray-800 rounded-full w-16 h-16 flex items-center justify-center shadow-lg",onClick:()=>i("prev"),"aria-label":"Previous",children:(0,r.jsx)(h,{size:28})}),(0,r.jsx)("button",{className:"bg-white bg-opacity-90 text-gray-800 rounded-full w-16 h-16 flex items-center justify-center shadow-lg",onClick:()=>i("next"),"aria-label":"Next",children:(0,r.jsx)(x,{size:28})})]})]})})},g=e=>{let{profile:t,onSwipe:s,swiping:l,currentIndex:i,totalProfiles:n}=e;return(0,r.jsxs)("div",{className:"md:w-1/2 p-4 md:p-6 flex flex-col overflow-y-auto",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-2xl md:text-3xl font-bold text-earth-800 mb-2",children:[t.name,", ",t.age]}),t.location&&(0,r.jsxs)("div",{className:"text-earth-600 mb-2 flex items-center",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),t.location]}),(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsx)("p",{className:"text-earth-700 text-sm md:text-base",children:t.bio})}),t.interests&&(0,r.jsxs)("div",{className:"mb-4 md:mb-6",children:[(0,r.jsx)("h3",{className:"text-earth-700 font-semibold mb-1 md:mb-2",children:"Interests"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1 md:gap-2",children:t.interests.map((e,t)=>(0,r.jsx)("span",{className:"bg-rose-100 text-rose-600 px-2 py-1 rounded-full text-xs md:text-sm",children:e},t))})]})]}),(0,r.jsxs)("div",{className:"mt-auto pb-4 md:pb-0",children:[(0,r.jsxs)("h3",{className:"text-center text-earth-600 mb-3 text-sm md:text-base",children:["Would you like to meet ",t.name,"?"]}),(0,r.jsxs)("div",{className:"flex justify-center space-x-6 md:space-x-8",children:[(0,r.jsx)(a.z,{className:"bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-full w-14 h-14 md:w-16 md:h-16 flex items-center justify-center text-xl md:text-2xl transition-transform duration-200 hover:scale-110",onClick:()=>s("left"),disabled:l,children:(0,r.jsx)(m,{size:24})}),(0,r.jsx)(a.z,{className:"bg-rose-500 hover:bg-rose-600 text-white rounded-full w-14 h-14 md:w-16 md:h-16 flex items-center justify-center text-xl md:text-2xl transition-transform duration-200 hover:scale-110",onClick:()=>s("right"),disabled:l,children:(0,r.jsx)(f,{size:24})})]}),(0,r.jsx)("div",{className:"text-center mt-3 md:mt-6",children:(0,r.jsxs)("span",{className:"text-xs md:text-sm text-earth-500",children:["Profile ",i+1," of ",n]})})]})]})},v=e=>{let{profile:t,isOpen:s,onClose:l}=e;return s?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-70",onClick:l}),(0,r.jsxs)("div",{className:"relative bg-white rounded-xl w-full max-w-md max-h-[80vh] overflow-y-auto z-50 animate-slideUp",children:[(0,r.jsx)("button",{className:"absolute top-2 right-2 bg-rose-100 p-2 rounded-full text-earth-600",onClick:l,children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,r.jsxs)("div",{className:"p-5",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-earth-800 mb-2",children:[t.name,", ",t.age]}),t.location&&(0,r.jsxs)("div",{className:"text-earth-600 mb-4 flex items-center",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),t.location]}),(0,r.jsxs)("div",{className:"mb-5",children:[(0,r.jsx)("h3",{className:"font-semibold text-earth-800 mb-2",children:"About"}),(0,r.jsx)("p",{className:"text-earth-700",children:t.bio})]}),t.interests&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"font-semibold text-earth-800 mb-2",children:"Interests"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:t.interests.map((e,t)=>(0,r.jsx)("span",{className:"bg-rose-100 text-rose-600 px-3 py-1 rounded-full text-sm",children:e},t))})]})]})]})]}):null},w=e=>{let{profile:t,currentImageIndex:s,totalImages:a,onImageNav:n,onSwipe:o,swiping:c,currentProfileIndex:d,totalProfiles:h,isMobile:x}=e,[u,j]=(0,l.useState)(!1);return(0,r.jsxs)("div",{className:"w-full h-full flex flex-col md:flex-row",children:[(0,r.jsx)("div",{className:"hidden ".concat(x?"":"md:flex"," w-full h-full"),children:(0,r.jsxs)(i.Zb,{className:"flex flex-row w-full h-full overflow-hidden shadow-xl rounded-none",children:[(0,r.jsx)(b,{image:t.images[s],name:t.name,currentIndex:s,totalImages:a,onNavigate:n}),(0,r.jsx)(g,{profile:t,onSwipe:o,swiping:c,currentIndex:d,totalProfiles:h})]})}),(0,r.jsxs)("div",{className:"md:hidden ".concat(x?"flex":"hidden"," w-full h-full"),children:[(0,r.jsx)(b,{image:t.images[s],name:t.name,currentIndex:s,totalImages:a,onNavigate:n,isMobile:!0}),(0,r.jsxs)("div",{className:"absolute bottom-24 right-4 flex flex-col space-y-3 z-30",children:[(0,r.jsx)("button",{onClick:()=>o("right"),disabled:c,className:"bg-rose-500 text-white rounded-full w-14 h-14 flex items-center justify-center shadow-lg",children:(0,r.jsx)(f,{size:24})}),(0,r.jsx)("button",{onClick:()=>o("left"),disabled:c,className:"bg-white text-gray-800 rounded-full w-14 h-14 flex items-center justify-center shadow-lg",children:(0,r.jsx)(m,{size:24})})]}),(0,r.jsx)("button",{className:"absolute bottom-24 left-4 bg-white bg-opacity-90 text-gray-800 rounded-full w-14 h-14 flex items-center justify-center shadow-lg z-30",onClick:()=>j(!0),children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)(v,{profile:t,isOpen:u,onClose:()=>j(!1)})]})]})},N=e=>{let{error:t,onRetry:s}=e;return(0,r.jsx)("div",{className:"h-screen flex items-center justify-center bg-gradient-to-br from-ivory-100 via-rose-50 to-earth-100",children:(0,r.jsxs)(i.Zb,{className:"p-8 max-w-md text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-earth-800 mb-4",children:"Something went wrong"}),(0,r.jsx)("p",{className:"text-earth-600 mb-6",children:t}),(0,r.jsx)(a.z,{className:"bg-rose-600 hover:bg-rose-700 text-white",onClick:s,children:"Try Again"})]})})},y=e=>{let{matches:t,onViewMatches:s,onReset:l}=e;return(0,r.jsx)("div",{className:"h-screen flex items-center justify-center bg-gradient-to-br from-ivory-100 via-rose-50 to-earth-100",children:(0,r.jsxs)(i.Zb,{className:"p-8 max-w-md",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-earth-800 mb-4 text-center",children:"You Have Matches! \uD83C\uDF89"}),(0,r.jsxs)("p",{className:"text-earth-600 mb-6 text-center",children:["You've matched with ",t.length," ",1===t.length?"person":"people","!"]}),(0,r.jsx)("div",{className:"flex flex-wrap justify-center gap-4 mb-6",children:t.slice(0,4).map(e=>(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 relative rounded-full overflow-hidden mb-1",children:(0,r.jsx)(n.default,{src:e.profile.images[0],alt:e.profile.name,fill:!0,style:{objectFit:"cover"}})}),(0,r.jsx)("div",{className:"text-xs text-earth-700",children:e.profile.name})]},e.id))}),(0,r.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,r.jsx)(a.z,{className:"bg-rose-600 hover:bg-rose-700 text-white",onClick:s,children:"View All Matches"}),(0,r.jsx)(a.z,{variant:"outline",className:"border-rose-300 text-rose-600 hover:bg-rose-50",onClick:l,children:"Start Over"})]})]})})},k=e=>{let{onReset:t,onGoToProfile:s}=e;return(0,r.jsx)("div",{className:"h-screen flex items-center justify-center bg-gradient-to-br from-ivory-100 via-rose-50 to-earth-100",children:(0,r.jsxs)(i.Zb,{className:"p-8 max-w-md text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-earth-800 mb-4",children:"No Matches Yet"}),(0,r.jsx)("p",{className:"text-earth-600 mb-6",children:"You've swiped through everyone! There are plenty of fish in the sea, but none have matched with you yet."}),(0,r.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,r.jsx)(a.z,{className:"bg-rose-600 hover:bg-rose-700 text-white",onClick:s,children:"Update Your Profile"}),(0,r.jsx)(a.z,{variant:"outline",className:"border-rose-300 text-rose-600 hover:bg-rose-50",onClick:t,children:"Start Over"})]})]})})};function C(){let e=(0,o.useRouter)(),{user:t,loading:s}=(0,c.a)(),[a,i]=(0,l.useState)(!0),[n,d]=(0,l.useState)([]),[h,x]=(0,l.useState)(0),[m,f]=(0,l.useState)(0),[b,g]=(0,l.useState)(!1),[v,C]=(0,l.useState)(null),[z,L]=(0,l.useState)(!1),[S,M]=(0,l.useState)([]),[E,I]=(0,l.useState)(!1),[P,R]=(0,l.useState)(!1),Z=p();(0,l.useEffect)(()=>{if(!s){if(!t){L(!0);return}(async()=>{try{i(!0);let e=await fetch("/api/profiles");if(!e.ok)throw Error("Failed to fetch profiles");let t=await e.json();d(t.profiles)}catch(e){console.error("Error loading profiles:",e),C("Failed to load profiles. Please try again later.")}finally{i(!1)}})()}},[t,s,e]);let F=async e=>{if(t&&!b&&!(h>=n.length)){g(!0);try{let s=n[h];console.log("User ".concat(t.uid," swiped ").concat(e," on profile ").concat(s.id," (").concat(s.name,")")),console.log("User ".concat(t.uid," swiped ").concat(e," on profile ").concat(s.id," (").concat(s.name,")")),f(0),x(e=>e+1)}catch(e){console.error("Error handling swipe:",e),C("Something went wrong. Please try again.")}finally{g(!1)}}};if((0,l.useEffect)(()=>{n[h]||E||P||!t||(async()=>{try{I(!0);let e=await fetch("/api/matches?userId=".concat(t.uid));if(!e.ok)throw Error("Failed to fetch matches");let s=await e.json();M(s.matches||[]),R(!0)}catch(e){console.error("Error loading matches:",e),C("Failed to load matches. Please try again later.")}finally{I(!1)}})()},[h,n,E,P,t]),z)return e.push("/"),null;if(s||a)return(0,r.jsx)("div",{className:"h-screen flex items-center justify-center bg-gradient-to-br from-ivory-100 via-rose-50 to-earth-100",children:(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-rose-600"}),(0,r.jsx)("div",{className:"text-2xl text-earth-800",children:"Loading profiles..."})]})});if(v)return(0,r.jsx)(N,{error:v,onRetry:()=>window.location.reload()});let W=n[h];if(!W)return E?(0,r.jsx)("div",{className:"h-screen flex items-center justify-center bg-gradient-to-br from-ivory-100 via-rose-50 to-earth-100",children:(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-rose-600"}),(0,r.jsx)("div",{className:"text-2xl text-earth-800",children:"Checking for matches..."})]})}):S&&S.length>0?(0,r.jsx)(y,{matches:S,onViewMatches:()=>e.push("/matches"),onReset:()=>{M([]),x(0),R(!1),i(!0),fetch("/api/profiles").then(e=>e.json()).then(e=>{d(e.profiles),i(!1)}).catch(e=>{console.error("Error reloading profiles:",e),C("Failed to reload profiles")})}}):(0,r.jsx)(k,{onReset:()=>{M([]),x(0),R(!1),i(!0),fetch("/api/profiles").then(e=>e.json()).then(e=>{d(e.profiles),i(!1)}).catch(e=>{console.error("Error reloading profiles:",e),C("Failed to reload profiles")})},onGoToProfile:()=>e.push("/profile")});let _=W.images.length;return(0,r.jsx)(j.default,{children:(0,r.jsxs)("div",{className:"h-screen w-screen flex overflow-hidden bg-gradient-to-br from-ivory-100 via-rose-50 to-earth-100 absolute top-0 left-0",children:[(0,r.jsx)(u.Z,{}),(0,r.jsx)("div",{className:"flex-1 flex flex-col h-full",children:(0,r.jsx)("main",{className:"flex-1 h-full p-0",children:(0,r.jsx)(w,{profile:W,currentImageIndex:m,totalImages:_,onImageNav:e=>{if(!n[h])return;let t=n[h].images.length;"next"===e?f(e=>(e+1)%t):f(e=>(e-1+t)%t)},onSwipe:F,swiping:b,currentProfileIndex:h,totalProfiles:n.length,isMobile:Z})})})]})})}},6070:function(e,t,s){"use strict";s.d(t,{Zb:function(){return i}});var r=s(7437),l=s(2265),a=s(4508);let i=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border border-earth-200 bg-ivory-100 text-earth-800 shadow-sm",s),...l})});i.displayName="Card",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",s),...l})}).displayName="CardHeader",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,r.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",s),...l})}).displayName="CardTitle",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,r.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-earth-600",s),...l})}).displayName="CardDescription",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",s),...l})}).displayName="CardContent",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",s),...l})}).displayName="CardFooter"}},function(e){e.O(0,[358,657,53,50,145,648,458,481,971,117,744],function(){return e(e.s=869)}),_N_E=e.O()}]);