(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[830],{6921:function(e,t,r){Promise.resolve().then(r.bind(r,5454))},5454:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var n=r(7437),a=r(9376),o=r(3301),i=r(7293);let s=new o.hJ,l=(0,o.v0)(i.ZP),u=async()=>{try{console.log("Starting Google sign-in with popup...");let e=await (0,o.rh)(l,s);return console.log("Sign-in successful"),{user:e.user,success:!0}}catch(e){throw console.error("Error during Google sign-in:",e),e}},c=async()=>{console.log("Checking for redirect result...");try{let e=await (0,o.cx)(l);if(console.log("Redirect result:",e?"SUCCESS":"NO RESULT"),e){let t=e.user;return console.log("User from redirect:",t),{user:t,success:!0}}return{user:null,success:!1}}catch(e){throw console.error("Error handling redirect:",e),e}};var d=r(2869),g=r(2265),h=r(8990),f=r(3145);function m(){let e=(0,a.useRouter)(),[t,r]=(0,g.useState)(!1),[o,i]=(0,g.useState)(null),{user:s}=(0,h.a)(),l=(0,a.usePathname)();(0,g.useEffect)(()=>{s&&"/sign-in"===l&&(console.log("User already signed in, redirecting to /swipe"),e.push("/swipe"))},[s,e,l]),(0,g.useEffect)(()=>{(async()=>{try{r(!0);let{user:t,success:n}=await c();n&&t&&(console.log("User found from redirect, navigating..."),e.push("/swipe"))}catch(e){console.error("Error handling redirect:",e),i("Authentication failed. Please try again.")}finally{r(!1)}})()},[e]);let m=async()=>{try{r(!0),i(null),await u()}catch(e){console.error("Error initiating sign in:",e),i("Failed to start authentication. Please try again."),r(!1)}};return(0,n.jsx)("div",{className:"fixed inset-0 w-full h-full",children:(0,n.jsx)("div",{className:"absolute inset-0 w-full h-full flex flex-col items-center justify-center bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/girl-profiles/mekkana-banner.png')",backgroundSize:"cover"},children:(0,n.jsx)("div",{className:"bg-white/80 backdrop-blur-sm p-8 rounded-lg shadow-lg w-full max-w-md",children:(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)(f.default,{src:"/favicon.png",alt:"Galatea AI Logo",width:80,height:80,className:"mb-6"}),(0,n.jsx)("h1",{className:"text-2xl font-bold mb-6 text-earth-800",children:"Sign in to Galatea AI"}),o&&(0,n.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4 w-full text-center",children:o}),(0,n.jsxs)(d.z,{onClick:m,variant:"outline",disabled:t,className:"w-full px-6 py-5 bg-white text-gray-700 border border-gray-300 rounded-lg shadow hover:bg-gray-50 transition flex items-center justify-center",children:[t?(0,n.jsx)("div",{className:"w-5 h-5 border-t-2 border-b-2 border-rose-600 rounded-full animate-spin mr-2"}):(0,n.jsx)(f.default,{src:"/icons/google-icon.svg",alt:"Google",width:20,height:20,className:"mr-2"}),t?"Signing in...":"Sign in with Google"]})]})})})})}},8990:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return c},a:function(){return u}});var n=r(7437),a=r(2265),o=r(3301),i=r(9376),s=r(7293);let l=(0,a.createContext)({user:null,loading:!0,error:null,isAuthenticated:!1,signOut:async()=>{}}),u=()=>(0,a.useContext)(l),c=e=>{let{children:t}=e,[r,u]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),[g,h]=(0,a.useState)(null),f=(0,i.useRouter)(),m=(0,o.v0)(s.ZP),p=async()=>{try{console.log("Signing out from AuthContext..."),await (0,o.w7)(m),u(null),f.push("/")}catch(e){console.error("Error signing out:",e),h("Failed to sign out")}};return(0,a.useEffect)(()=>{console.log("Setting up auth state listener");let e=(0,o.Aj)(m,e=>{console.log("Auth state changed:",e?"Logged in as ".concat(e.displayName||e.email):"Not logged in"),e?u({uid:e.uid,email:e.email||"",emailVerified:e.emailVerified,displayName:e.displayName||"",isAnonymous:e.isAnonymous,photoURL:e.photoURL||"",providerData:e.providerData.map(e=>({providerId:e.providerId,uid:e.uid,displayName:e.displayName||"",email:e.email||"",phoneNumber:e.phoneNumber,photoURL:e.photoURL||""})),stsTokenManager:{refreshToken:e.refreshToken||"",accessToken:"",expirationTime:0},createdAt:"",lastLoginAt:"",apiKey:"",appName:m.app.name}):(console.log("No user detected, clearing user state"),u(null)),d(!1)},e=>{console.error("Auth state error:",e),h(e.message),d(!1)});return()=>e()},[m,f]),(0,n.jsx)(l.Provider,{value:{user:r,loading:c,error:g,isAuthenticated:!!r,signOut:p},children:t})}},2869:function(e,t,r){"use strict";r.d(t,{z:function(){return u}});var n=r(7437),a=r(2265),o=r(5293),i=r(535),s=r(4508);let l=(0,i.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-rose-600 text-ivory-100 hover:bg-rose-700",signIn:"bg-rose-600 text-ivory-100 hover:bg-rose-700",destructive:"bg-red-500 text-ivory-100 hover:bg-red-600",outline:"border border-earth-200 bg-ivory-100 hover:bg-earth-100 hover:text-earth-700",secondary:"bg-earth-200 text-earth-700 hover:bg-earth-300",ghost:"hover:bg-earth-100 hover:text-earth-700",link:"underline-offset-4 hover:underline text-rose-600"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),u=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:u=!1,...c}=e,d=u?o.g7:"button";return(0,n.jsx)(d,{className:(0,s.cn)(l({variant:a,size:i,className:r})),ref:t,...c})});u.displayName="Button"},7293:function(e,t,r){"use strict";var n=r(738),a=r(5978),o=r(62),i=r(6834);let s=(0,n.ZF)({apiKey:"AIzaSyBlw_fzjEs-NbOabJkHEpGbfBdDEt7RVvI",authDomain:"galatea-ai.firebaseapp.com",projectId:"galatea-ai",storageBucket:"galatea-ai.firebasestorage.app",messagingSenderId:"727737899444",appId:"1:727737899444:web:16152c4885a96302af7ae1",measurementId:"G-6ZQT56XSCV"});(0,a.ad)(s),(0,o.cF)(s),(0,i.IH)(s),t.ZP=s},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return o}});var n=r(1994),a=r(3335);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}}},function(e){e.O(0,[358,657,53,50,145,971,117,744],function(){return e(e.s=6921)}),_N_E=e.O()}]);