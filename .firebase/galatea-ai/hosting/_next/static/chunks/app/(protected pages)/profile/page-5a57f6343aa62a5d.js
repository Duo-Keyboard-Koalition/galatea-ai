(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95],{2134:function(e,t,r){Promise.resolve().then(r.bind(r,5886))},5886:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var a=r(7437),s=r(2265),o=r(9376),n=r(8990),i=r(6070),l=r(2869),d=r(3301);function c(){let e=(0,o.useRouter)(),{user:t,loading:r}=(0,n.a)(),[c,u]=(0,s.useState)(!0),[f,h]=(0,s.useState)(!1),[m,p]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(!r){if(!t){e.push("/sign-in");return}u(!1)}},[t,r,e]);let x=async()=>{try{var e;let t=(0,d.v0)(),r=await (null===(e=t.currentUser)||void 0===e?void 0:e.getIdToken()),a=await fetch("/api/protected",{headers:{Authorization:"Bearer ".concat(r)}});if(!a.ok){let e=await a.json();console.error("Failed to call protected API:",e.error),p("Failed to call protected API");return}let s=await a.json();console.log("Protected API Response:",s),p("Response: ".concat(s.message,", User ID: ").concat(s.userId))}catch(e){console.error("Error calling protected API:",e),p("Error calling protected API")}};return r||c?(0,a.jsx)("div",{className:"h-full w-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-rose-600"}),(0,a.jsx)("div",{className:"text-2xl text-earth-800",children:"Loading profile..."})]})}):(0,a.jsxs)("div",{className:"h-full w-full p-6 overflow-y-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-earth-800 mb-6",children:"My Profile"}),(0,a.jsxs)("div",{className:"flex flex-col space-y-6",children:[(0,a.jsxs)(i.Zb,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-earth-700 mb-4",children:"User JSON"}),(0,a.jsxs)("div",{className:"relative bg-gray-100 p-4 rounded-md",children:[(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(JSON.stringify(t,null,2)),h(!0),setTimeout(()=>h(!1),2e3)},className:"absolute top-2 right-2 text-sm text-white bg-rose-500 hover:bg-rose-600 px-2 py-1 rounded",children:f?"âœ“ Copied":"Copy"}),(0,a.jsx)("pre",{className:"text-sm text-gray-800 overflow-auto max-h-[60vh]",style:{whiteSpace:"pre-wrap",wordBreak:"break-word",maxWidth:"100%"},children:JSON.stringify(t,null,2)})]})]}),(0,a.jsxs)(i.Zb,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-earth-700 mb-4",children:"Call Protected API"}),(0,a.jsx)(l.z,{className:"bg-rose-500 hover:bg-rose-600 text-white",onClick:x,children:"Call Protected API"}),m&&(0,a.jsx)("p",{className:"mt-4 text-sm text-earth-700",children:m})]})]})]})}},8990:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return c},a:function(){return d}});var a=r(7437),s=r(2265),o=r(3301),n=r(9376),i=r(7293);let l=(0,s.createContext)({user:null,loading:!0,error:null,isAuthenticated:!1,signOut:async()=>{}}),d=()=>(0,s.useContext)(l),c=e=>{let{children:t}=e,[r,d]=(0,s.useState)(null),[c,u]=(0,s.useState)(!0),[f,h]=(0,s.useState)(null),m=(0,n.useRouter)(),p=(0,o.v0)(i.ZP),x=async()=>{try{console.log("Signing out from AuthContext..."),await (0,o.w7)(p),d(null),m.push("/")}catch(e){console.error("Error signing out:",e),h("Failed to sign out")}};return(0,s.useEffect)(()=>{console.log("Setting up auth state listener");let e=(0,o.Aj)(p,e=>{console.log("Auth state changed:",e?"Logged in as ".concat(e.displayName||e.email):"Not logged in"),e?d({uid:e.uid,email:e.email||"",emailVerified:e.emailVerified,displayName:e.displayName||"",isAnonymous:e.isAnonymous,photoURL:e.photoURL||"",providerData:e.providerData.map(e=>({providerId:e.providerId,uid:e.uid,displayName:e.displayName||"",email:e.email||"",phoneNumber:e.phoneNumber,photoURL:e.photoURL||""})),stsTokenManager:{refreshToken:e.refreshToken||"",accessToken:"",expirationTime:0},createdAt:"",lastLoginAt:"",apiKey:"",appName:p.app.name}):(console.log("No user detected, clearing user state"),d(null)),u(!1)},e=>{console.error("Auth state error:",e),h(e.message),u(!1)});return()=>e()},[p,m]),(0,a.jsx)(l.Provider,{value:{user:r,loading:c,error:f,isAuthenticated:!!r,signOut:x},children:t})}},2869:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var a=r(7437),s=r(2265),o=r(5293),n=r(535),i=r(4508);let l=(0,n.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-rose-600 text-ivory-100 hover:bg-rose-700",signIn:"bg-rose-600 text-ivory-100 hover:bg-rose-700",destructive:"bg-red-500 text-ivory-100 hover:bg-red-600",outline:"border border-earth-200 bg-ivory-100 hover:bg-earth-100 hover:text-earth-700",secondary:"bg-earth-200 text-earth-700 hover:bg-earth-300",ghost:"hover:bg-earth-100 hover:text-earth-700",link:"underline-offset-4 hover:underline text-rose-600"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:d=!1,...c}=e,u=d?o.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(l({variant:s,size:n,className:r})),ref:t,...c})});d.displayName="Button"},6070:function(e,t,r){"use strict";r.d(t,{Zb:function(){return n}});var a=r(7437),s=r(2265),o=r(4508);let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("rounded-lg border border-earth-200 bg-ivory-100 text-earth-800 shadow-sm",r),...s})});n.displayName="Card",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",r),...s})}).displayName="CardHeader",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})}).displayName="CardTitle",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,o.cn)("text-sm text-earth-600",r),...s})}).displayName="CardDescription",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",r),...s})}).displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},7293:function(e,t,r){"use strict";var a=r(738),s=r(5978),o=r(62),n=r(6834);let i=(0,a.ZF)({apiKey:"AIzaSyBlw_fzjEs-NbOabJkHEpGbfBdDEt7RVvI",authDomain:"galatea-ai.firebaseapp.com",projectId:"galatea-ai",storageBucket:"galatea-ai.firebasestorage.app",messagingSenderId:"727737899444",appId:"1:727737899444:web:16152c4885a96302af7ae1",measurementId:"G-6ZQT56XSCV"});(0,s.ad)(i),(0,o.cF)(i),(0,n.IH)(i),t.ZP=i},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return o}});var a=r(1994),s=r(3335);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}}},function(e){e.O(0,[358,657,53,50,971,117,744],function(){return e(e.s=2134)}),_N_E=e.O()}]);